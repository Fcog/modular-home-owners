{% load wagtailimages_tags svg custom_filters spurl %}

<a 
    href="{{ url }}"
    {% if activate_inifinite_scroll and show_htmx and homes.next_page_number %} hx-get="{% spurl base=request.get_full_path set_query="page={{ homes.next_page_number }}" %}" hx-trigger="revealed" hx-swap="afterend" {% endif %}
    class="inline-block border border-gray-60 {% if activate_inifinite_scroll %} w-full md:w-48% lg:w-31% xl:max-w-380px {% else %} w-full md:w-48% lg:w-31% 2xl:max-w-455px {% endif %}">

    {% image main_image fill-380x283 as tmp_photo %}
    
        <img 
            src="{{ tmp_photo.url }}" 
            alt="{{ tmp_photo.alt }}" 
            class="w-full {% if activate_inifinite_scroll %} md:h-283px {% else %} md:h-339px {% endif %}" />
    
    <div class="pt-5 md:pt-6 2xl:pt-7  pb-3 md:pb-6 2xl:pb-10  px-5 md:px-4 2xl:px-8">
    
        <div class="flex">

            <div class="{% if verified %}w-10/12{% endif %}">
                <h2 class="font-bold md:text-2xl text-black-medium">{{ title }}</h2>
            </div>

            {% if verified %}

            <div class="flex justify-end w-2/12">
                <div class="svg-h-2.5">
                    {% svg 'verified' %}
                </div>
            </div>

            {% endif %}

        </div>
        
        <div class="flex justify-between py-3 md:py-5 mb-3 md:mb-5 text-xxs md:text-xs {% if wide_design %} 2xl:text-base {% endif %} text-black-medium border-b border-gray-60">
        
            {% include "patterns/atoms/icon-text/icon-text.html" with title=bedrooms_text quantity=bedrooms icon="Beds Icon" big_text=wide_design %}
            {% include "patterns/atoms/icon-text/icon-text.html" with title=baths_text quantity=baths_formatted icon="Baths Icon" big_text=wide_design %}
            {% include "patterns/atoms/icon-text/icon-text.html" with title="Sq. Ft" quantity=sqft icon="Sq Feet Icon" big_text=wide_design %}

        </div>

        <div class="relative flex js-tooltip">

            {% include "patterns/atoms/labels/label1.html" with title="Base Price" value=cost_formatted wide_design=wide_design class="mb-4 lg:mb-0 mr-16" %}
            
            {% include "patterns/atoms/labels/label1.html" with title="Est. total" value=estimated_cost_formatted icon="help" wide_design=wide_design %}

            {% include "patterns/atoms/tooltip/tooltip.html" with message=settings.base.HomePageSettings.home_tooltip_text %}
        
        </div>
    
    </div>

</a>